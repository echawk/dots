#!/bin/sh -e
[ $(basename $PWD) = dots ] || exit 1

sbcl --load "$PWD/dev/.sbclrc" \
     --load stow.lisp \
     --eval "(stow:stow)" \
     --eval "(quit)"

# Picom behaves strangely if the file is a symlink.
if [ -e "$HOME/.config/picom.conf" ]; then
    rm "$HOME/.config/picom.conf" && cp X/.config/picom.conf "$HOME/.config/picom.conf"
fi
